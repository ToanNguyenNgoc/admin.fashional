{"version":3,"file":"static/js/595.1efa4db0.chunk.js","mappings":"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","sources":["app/hooks/usePermission.ts","app/pages/accounts/index.tsx"],"sourcesContent":["import { CODE_SPA } from \"app/constants\"\nimport { useAuth } from \"app/modules/auth\"\n\nexport const usePermission = (permissionPath: string) => {\n    let resolve = false\n    const { roles } = useAuth()\n    const roles_code = roles.map(i => i.role.code)\n    const permissions = roles.flatMap(i => i.role.permissions).map(i => i.permission)\n    if (roles_code.includes(CODE_SPA) || (permissions.map(i => i.path).includes(permissionPath))) {\n        resolve = true\n    }\n    return {\n        resolve\n    }\n}","import { Button } from \"@mui/material\";\nimport { toAbsoluteUrl } from \"_metronic/helpers\";\nimport { _account } from \"app/apis\";\nimport { PageTitle, RoleLayout, SwitchButton } from \"app/components\";\nimport { PAccount, RAccount } from \"app/constants\";\nimport { usePermission } from \"app/hooks\";\nimport { QrAccount } from \"app/models\";\nimport { QR_KEY } from \"configs\";\nimport moment from \"moment\";\nimport { Fragment } from \"react\";\nimport { useQuery } from \"react-query\";\nimport { Link, useNavigate } from \"react-router-dom\";\n\nfunction AccountPage() {\n  const { resolve } = usePermission(RAccount.GET)\n  const navigate = useNavigate()\n  const qrParams: QrAccount = {\n    'page': 1,\n    'limit': 15,\n    'manager': true,\n    'includes': 'roles'\n  }\n  const { data } = useQuery({\n    queryKey: [QR_KEY.account, qrParams],\n    queryFn: () => _account.findAll(qrParams),\n    enabled: resolve,\n  })\n  return (\n    <RoleLayout permissionPath={RAccount.GET} isNavigate>\n      <Fragment>\n        <PageTitle title=\"Danh sách tài khoản\">\n          <RoleLayout permissionPath={RAccount.POST}>\n            <Button onClick={() => navigate(PAccount.create)} size=\"medium\" color=\"primary\"\n              variant=\"contained\" >\n              Tạo mới tài khoản\n            </Button>\n          </RoleLayout>\n        </PageTitle>\n        <div className={`card`}>\n          <div className='card-header border-0 pt-5'>\n            <h3 className='card-title align-items-start flex-column'>\n              <span className='card-label fw-bold fs-3 mb-1'>Tài khoản</span>\n              <span className='text-muted mt-1 fw-semobold fs-7'>\n                {data?.context?.total} tài khoản\n              </span>\n            </h3>\n          </div>\n          <div className='card-body py-3'>\n            <div className='table-responsive'>\n              <table className='table align-middle gs-0 gy-4'>\n                <thead>\n                  <tr className='fw-bold text-muted bg-light'>\n                    <th className='ps-4 min-w-200px'>Họ và tên</th>\n                    <th className='min-w-125px'>Email</th>\n                    <th className='min-w-125px'>Quyền</th>\n                    <RoleLayout permissionPath={RAccount.PUT} >\n                      <th className='min-w-50px'>Trạng thái</th>\n                    </RoleLayout>\n                    <th className='min-w-100px'>Ngày tạo</th>\n                    <th className='min-w-200px text-end rounded-end'></th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {\n                    data?.context.data.map((i) => (\n                      <tr key={i.id}>\n                        <td>\n                          <div className='d-flex align-items-center'>\n                            <div className='symbol symbol-50px me-5'>\n                              <span className='symbol-label bg-light'>\n                                <img\n                                  src={toAbsoluteUrl('/media/svg/avatars/001-boy.svg')}\n                                  className='h-75 align-self-end'\n                                  alt=''\n                                />\n                              </span>\n                            </div>\n                            <div className='d-flex justify-content-start flex-column'>\n                              <span className='text-dark fw-bold mb-1 fs-6'>\n                                {i.fullname}\n                              </span>\n                              <span className='text-muted fw-semobold text-muted d-block fs-7'>\n                                {i.telephone}\n                              </span>\n                            </div>\n                          </div>\n                        </td>\n                        <td>\n                          <span className='text-muted fw-semobold text-muted d-block fs-6'>\n                            {i.email}\n                          </span>\n                        </td>\n                        <td>\n                          {\n                            i.roles?.map((role) => (\n                              <span key={role.role?.id} className=\"badge badge-primary m-1\">\n                                {role?.role?.name}\n                              </span>\n                            ))\n                          }\n                        </td>\n                        <RoleLayout permissionPath={RAccount.PUT}>\n                          <td className=\"d-flex justify-content-center\">\n                            <SwitchButton value={i.status} />\n                          </td>\n                        </RoleLayout>\n                        <td>\n                          <span className='text-muted fw-semobold text-muted d-block fs-7'>\n                            {moment(i.created_at).format('HH:mm DD/MM/YYYY')}\n                          </span>\n                        </td>\n                        <td className='text-end'>\n                          <RoleLayout permissionPath={RAccount.PUT}>\n                            <Link to={PAccount.update_id(i.id)} className=\"btn btn-icon btn-success me-1 rounded-circle btn-sm \">\n                              <i className=\"bi bi-pen fs-6\"></i>\n                            </Link>\n                          </RoleLayout>\n                          <RoleLayout permissionPath={RAccount.DELETE}>\n                            <button className=\"btn btn-icon btn-danger me-1 rounded-circle btn-sm\">\n                              <i className=\"bi bi-trash-fill fs-6\"></i>\n                            </button>\n                          </RoleLayout>\n                        </td>\n                      </tr>\n                    ))\n                  }\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    </RoleLayout>\n  );\n}\n\nexport default AccountPage;"],"names":["usePermission","permissionPath","resolve","roles","useAuth","roles_code","map","i","role","code","permissions","flatMap","permission","includes","CODE_SPA","path","RAccount","navigate","useNavigate","qrParams","data","useQuery","queryKey","QR_KEY","queryFn","_account","enabled","isNavigate","Fragment","title","onClick","PAccount","size","color","variant","className","context","total","src","toAbsoluteUrl","alt","fullname","telephone","email","name","id","value","status","moment","created_at","format","to"],"sourceRoot":""}