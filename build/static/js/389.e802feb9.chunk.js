"use strict";(self.webpackChunkadmin_fashional_pro=self.webpackChunkadmin_fashional_pro||[]).push([[389],{2389:function(e,n,a){a.r(n),a.d(n,{default:function(){return g}});var s=a(1413),l=a(2235),r=a(1156),t=a(3654),o=a(5280),i=a(9965),c=a(5173),m=a(2791),d=a(1933),u=a(6871),h=a(5366),p=a(1724),f=a(6829),x=a(184);var g=function(){var e=(0,u.UO)().id,n=(0,o.GS)(),a=n.handlePostMedia,g=n.isLoading,v=(0,o.UD)(),j=v.notification,N=v.result,y=v.onClose,b=(0,o.gI)(t.tz.GET_ID).resolve,w=(0,d.useMutation)({mutationFn:function(n){return e?l.qg.update(e,n):l.qg.create(n)},onSuccess:function(){return N({message:e?"C\u1eadp nh\u1eadt th\xe0nh c\xf4ng":"T\u1ea1o m\u1edbi th\xe0nh c\xf4ng",color:"success"})},onError:function(){return N({message:"C\xf3 l\u1ed7i x\u1ea3y ra",color:"error"})}}),_=w.isLoading,k=w.mutate,C=(0,c.TA)({initialValues:{fullname:"",email:"",telephone:"",avatar:"",status:!1,password:"",password_confirm:"",roles:[]},validationSchema:p.Ry({fullname:p.Z_().required("Vui l\xf2ng nh\u1eadp h\u1ecd v\xe0 t\xean"),email:p.Z_().required("Vui l\xf2ng nh\u1eadp email").matches(f.Gu.email,{message:"Nh\u1eadp \u0111\xfang d\u1ea1ng d\u1ea1ng email"}),telephone:p.Z_().required("Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),password:e?p.Z_():p.Z_().required("Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u"),password_confirm:e?p.Z_():p.Z_().required("Vui l\xf2ng nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u").oneOf([p.iH("password"),null],"M\u1eadt kh\u1ea9u kh\xf4ng kh\u1edbp")}),onSubmit:function(e){k((0,s.Z)((0,s.Z)({},e),{},{roles:e.roles.map((function(e){return e.id}))}))}}),q=C.touched,Z=C.errors,S=C.values,T=C.handleChange,V=C.handleSubmit,F=C.setFieldValue,M=(0,d.useQuery)({queryKey:[i.xG.account,e],queryFn:function(){return l.qg.findById(e||0)},enabled:!(!e||!b),onSuccess:function(e){var n;F("fullname",e.context.fullname),F("status",e.context.status),F("email",e.context.email),F("telephone",e.context.telephone),F("avatar",e.context.avatar),F("roles",null===(n=e.context.roles)||void 0===n?void 0:n.map((function(e){return e.role})))}}),E=M.refetch,G=M.isFetching;return(0,x.jsx)(r.uR,{permissionPath:e?t.tz.PUT:t.tz.POST,isNavigate:!0,children:(0,x.jsxs)(m.Fragment,{children:[(0,x.jsx)(r.V1,{title:e?"Thay \u0111\u1ed5i th\xf4ng tin":"T\u1ea1o m\u1edbi t\xe0i kho\u1ea3n"}),(0,x.jsx)(r.rH,{message:j.message,open:j.openAlert,onClose:y,severity:j.color}),(0,x.jsx)("div",{className:"card p-4",children:(0,x.jsxs)("form",{autoComplete:"off",onSubmit:V,className:"py-4 px-8 form",children:[(0,x.jsx)("div",{className:"my-3 d-flex justify-content-center",children:(0,x.jsxs)("div",{className:"avatar-image",children:[(0,x.jsx)("img",{src:S.avatar,alt:""}),(0,x.jsx)("div",{className:"btn-avatar-cnt",children:(0,x.jsx)(r.vA,{loading:g,id:"file_avatar",onChange:function(e){a({e:e,resetOriginalResult:!0,callBack:function(e){return F("avatar",e[0].original_url)}})}})})]})}),(0,x.jsx)("div",{className:"column my-3",children:(0,x.jsx)(r.U3,{label:"Tr\u1ea1ng th\xe1i",value:S.status,onChange:function(e){return F("status",e.target.checked)}})}),(0,x.jsxs)("div",{className:"column my-3",children:[(0,x.jsx)("label",{className:"form-label required",children:"H\u1ecd v\xe0 t\xean"}),(0,x.jsx)("input",{name:"fullname",value:S.fullname,onChange:T,type:"text",className:"form-control form-control-solid",placeholder:"H\u1ecd v\xe0 t\xean"}),q.fullname&&Z.fullname&&(0,x.jsx)("span",{className:"text-danger fs-8",children:Z.fullname})]}),(0,x.jsxs)("div",{className:"d-flex justify-content-between row-2",children:[(0,x.jsxs)("div",{className:"column-2 my-3",children:[(0,x.jsx)("label",{className:"form-label required",children:"Email"}),(0,x.jsx)("input",{type:"text",name:"email",value:S.email,onChange:T,className:"form-control form-control-solid",placeholder:"Email"}),q.email&&Z.email&&(0,x.jsx)("span",{className:"text-danger fs-8",children:Z.email})]}),(0,x.jsxs)("div",{className:"column-2 my-3",children:[(0,x.jsx)("label",{className:"form-label required",children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),(0,x.jsx)("input",{type:"text",name:"telephone",value:S.telephone,onChange:T,className:"form-control form-control-solid",placeholder:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),q.telephone&&Z.telephone&&(0,x.jsx)("span",{className:"text-danger fs-8",children:Z.telephone})]})]}),(0,x.jsxs)("div",{className:"d-flex justify-content-between row-2",children:[(0,x.jsxs)("div",{className:"column-2 my-3",children:[(0,x.jsx)("label",{className:"form-label required",children:"M\u1eadt kh\u1ea9u"}),(0,x.jsx)("input",{disabled:!!e,type:"password",className:"form-control form-control-solid",placeholder:"M\u1eadt kh\u1ea9u",name:"password",value:S.password,onChange:T}),q.password&&Z.password&&(0,x.jsx)("span",{className:"text-danger fs-8",children:Z.password})]}),(0,x.jsxs)("div",{className:"column-2 my-3",children:[(0,x.jsx)("label",{className:"form-label required",children:"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u"}),(0,x.jsx)("input",{disabled:!!e,type:"password",className:"form-control form-control-solid",placeholder:"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u",name:"password_confirm",value:S.password_confirm,onChange:T}),q.password_confirm&&Z.password_confirm&&(0,x.jsx)("span",{className:"text-danger fs-8",children:Z.password_confirm})]})]}),(0,x.jsx)("div",{className:"column my-3",children:(0,x.jsx)(r.pB,{value:S.roles,onChange:function(e){return F("roles",e)}})}),(0,x.jsxs)("div",{className:"d-flex justify-content-end mt-6",children:[(0,x.jsx)(h.Z,{loading:_,type:"submit",color:"success",variant:"contained",children:"L\u01b0u"}),e&&(0,x.jsx)(h.Z,{loading:G,onClick:function(){return E()},className:"mx-2",type:"button",variant:"outlined",children:"Kh\xf4i ph\u1ee5c"})]})]})})]})})}}}]);
//# sourceMappingURL=389.e802feb9.chunk.js.map