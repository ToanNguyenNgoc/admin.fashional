"use strict";(self.webpackChunkadmin_fashional_pro=self.webpackChunkadmin_fashional_pro||[]).push([[276],{2276:function(e,n,a){a.r(n),a.d(n,{default:function(){return x}});var i=a(1413),s=a(5366),r=a(1156),l=a(3654),o=a(5173),t=a(6871),d=a(5280),c=a(1933),u=a(9965),h=a(2235),m=a(1724),v=a(6829),g=a(184);var x=function(){var e,n=(0,t.UO)().id,a=(0,d.GS)(),x=a.handlePostMedia,f=a.isLoading,p=(0,d.UD)(),j=p.notification,_=p.result,N=p.onClose,y=(0,c.useMutation)({mutationFn:function(e){return n?h.up.update(n,e):h.up.create(e)},onSuccess:function(){return _({message:n?"C\u1eadp nh\u1eadt th\xe0nh c\xf4ng":"T\u1ea1o m\u1edbi th\xe0nh c\xf4ng",color:"success"})},onError:function(e){var n;_({message:(null===(n=e.response)||void 0===n?void 0:n.data.message)||"C\xf3 l\u1ed7i x\u1ea3y ra",color:"error"})}}),b=y.mutate,C=y.isLoading,q=(0,o.TA)({initialValues:{name:"",email:"",hotline:"",short_address:"",media:null,status:!0,province_code:void 0,district_code:void 0,ward_code:void 0},validationSchema:m.Ry({name:m.Z_().required("Vui l\xf2ng nh\u1eadp t\xean chi nh\xe1nh"),email:m.Z_().required("Vui l\xf2ng nh\u1eadp email").matches(v.Gu.email,{message:"Nh\u1eadp \u0111\xfang d\u1ea1ng d\u1ea1ng email"}),hotline:m.Z_().required("Vui l\xf2ng nh\u1eadp hotline").matches(v.Gu.phone,{message:"Nh\u1eadp \u0111\xfang d\u1ea1ng d\u1ea1ng hotline"}),short_address:m.Z_().required("Vui l\xf2ng nh\u1eadp \u0111\u1ecba ch\u1ec9 chi nh\xe1nh"),province_code:m.Z_().required("Vui l\xf2ng ch\u1ecdn t\u1ec9nh/th\xe0nh ph\u1ed1"),district_code:m.Z_().required("Vui l\xf2ng ch\u1ecdn qu\u1eadn/huy\u1ec7n"),ward_code:m.Z_().required("Vui l\xf2ng ch\u1ecdn x\xe3/ph\u01b0\u1eddng")}),onSubmit:function(e){var n;b((0,i.Z)((0,i.Z)({},e),{},{media_id:(null===(n=e.media)||void 0===n?void 0:n.id)||void 0}))}}),w=q.values,Z=q.errors,V=q.touched,S=q.handleChange,T=q.handleSubmit,k=q.setFieldValue,F=(0,c.useQuery)({queryKey:[u.xG.branch,n],queryFn:function(){return h.up.findById(n||0)},enabled:!!n,onSuccess:function(e){var n,a,i,s=e.context;k("name",s.name),k("status",s.status),k("email",s.email||""),k("media",s.media),k("hotline",s.hotline||""),k("short_address",s.short_address||""),k("province_code",null===(n=s.province)||void 0===n?void 0:n.code),k("district_code",null===(a=s.district)||void 0===a?void 0:a.code),k("ward_code",null===(i=s.ward)||void 0===i?void 0:i.code)}}),P=F.refetch,G=F.isFetching;return(0,g.jsx)(r.uR,{permissionPath:n?l.xw.PUT:l.xw.POST,isNavigate:!0,children:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(r.rH,{message:j.message,open:j.openAlert,onClose:N,severity:j.color}),(0,g.jsx)(r.V1,{title:n?"Thay \u0111\u1ed5i th\xf4ng tin":"T\u1ea1o m\u1edbi chi nh\xe1nh"}),(0,g.jsx)("div",{className:"card p-4",children:(0,g.jsxs)("form",{onSubmit:T,className:"form",children:[(0,g.jsx)("div",{className:"my-3 d-flex justify-content-center",children:(0,g.jsxs)("div",{className:"avatar-image",children:[(0,g.jsx)("img",{src:(null===(e=w.media)||void 0===e?void 0:e.original_url)||"",alt:""}),(0,g.jsx)("div",{className:"btn-avatar-cnt",children:(0,g.jsx)(r.vA,{loading:f,id:"file_avatar",onChange:function(e){x({e:e,resetOriginalResult:!0,callBack:function(e){return k("media",e[0])}})}})})]})}),(0,g.jsx)("div",{className:"column my-3",children:(0,g.jsx)(r.U3,{label:"Tr\u1ea1ng th\xe1i",value:w.status,onChange:function(e){return k("status",e.target.checked)}})}),(0,g.jsxs)("div",{className:"column my-3",children:[(0,g.jsx)("label",{className:"form-label required",children:"T\xean chi nh\xe1nh"}),(0,g.jsx)("input",{name:"name",value:w.name,onChange:S,type:"text",className:"form-control form-control-solid"}),V.name&&Z.name&&(0,g.jsx)("span",{className:"text-danger fs-8",children:Z.name})]}),(0,g.jsxs)("div",{className:"d-flex justify-content-between row-2",children:[(0,g.jsxs)("div",{className:"column-2 my-3",children:[(0,g.jsx)("label",{className:"form-label required",children:"Email li\xean h\u1ec7"}),(0,g.jsx)("input",{name:"email",value:w.email,onChange:S,className:"form-control form-control-solid"}),V.email&&Z.email&&(0,g.jsx)("span",{className:"text-danger fs-8",children:Z.email})]}),(0,g.jsxs)("div",{className:"column-2 my-3",children:[(0,g.jsx)("label",{className:"form-label required",children:"Hotline"}),(0,g.jsx)("input",{name:"hotline",value:w.hotline,onChange:S,className:"form-control form-control-solid"}),V.hotline&&Z.hotline&&(0,g.jsx)("span",{className:"text-danger fs-8",children:Z.hotline})]})]}),(0,g.jsxs)("div",{className:"column my-3",children:[(0,g.jsx)("label",{className:"form-label required",children:"\u0110\u1ecba ch\u1ec9"}),(0,g.jsx)("input",{name:"short_address",value:w.short_address,onChange:S,type:"text",className:"form-control form-control-solid"}),V.short_address&&Z.short_address&&(0,g.jsx)("span",{className:"text-danger fs-8",children:Z.short_address})]}),(0,g.jsx)("div",{className:"column my-3",children:(0,g.jsx)(r.nK,{values:{province:w.province_code,district:w.district_code,ward:w.ward_code},onChangeProvince:function(e){return k("province_code",e)},onChangeDistrict:function(e){return k("district_code",e)},onChangeWard:function(e){return k("ward_code",e)}})}),(0,g.jsxs)("div",{className:"d-flex justify-content-end mt-6",children:[(0,g.jsx)(s.Z,{loading:C,type:"submit",color:"success",variant:"contained",children:"L\u01b0u"}),n&&(0,g.jsx)(s.Z,{onClick:function(){return P()},loading:G,className:"mx-2",type:"button",variant:"outlined",children:"Kh\xf4i ph\u1ee5c"})]})]})})]})})}}}]);
//# sourceMappingURL=276.be4afdb3.chunk.js.map