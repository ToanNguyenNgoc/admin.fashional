{"version":3,"file":"static/js/531.59130e25.chunk.js","mappings":"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","sources":["app/pages/categories/category-form.tsx"],"sourcesContent":["import { _category } from \"app/apis\";\nimport { PageTitle, RoleLayout, SelectTag, Snack, SwitchButton } from \"app/components\";\nimport { RCategory } from \"app/constants\";\nimport { QR_KEY } from \"configs\";\nimport { useMutation, useQuery } from \"react-query\";\nimport { useParams } from \"react-router-dom\";\nimport { useFormik } from \"formik\";\nimport { LoadingButton } from \"@mui/lab\";\nimport * as Yup from \"yup\"\nimport { CategoryBody } from \"app/models\";\nimport { useMessage } from \"app/hooks\";\nimport { AxiosError } from \"axios\";\n\nfunction CategoryForm() {\n  const { id } = useParams()\n  const { result, notification: { message, color, openAlert }, onClose } = useMessage()\n  const { mutate, isLoading } = useMutation({\n    mutationFn: (body: CategoryBody) => id ? _category.update(id, body) : _category.create(body),\n    onSuccess: () => result({\n      message: id ? \"Cập nhật thành công\" : \"Tạo mới thành công\",\n      color: \"success\"\n    }),\n    onError: (err) => {\n      const error = err as AxiosError\n      result({\n        message: error.response?.data.message || 'Có lỗi xảy ra',\n        color: 'error'\n      })\n    }\n  })\n  const { values, errors, touched, setFieldValue, handleChange, handleSubmit } = useFormik({\n    initialValues: {\n      name: '',\n      tag_id: '',\n      status: true,\n    },\n    validationSchema: Yup.object({\n      name: Yup.string().required(\"Nhập tên\"),\n      tag_id: Yup.number().required(\"Chọn tag\")\n    }),\n    onSubmit: (values) => mutate(values)\n  })\n  const { refetch, isFetching } = useQuery({\n    queryKey: [QR_KEY.category, id],\n    queryFn: () => _category.findById(id || 0),\n    enabled: !!id,\n    onSuccess: (data) => {\n      setFieldValue('name', data.context.name)\n      setFieldValue('tag_id', data.context.tag_id)\n      setFieldValue('status', data.context.status)\n    }\n  })\n  return (\n    <RoleLayout permissionPath={id ? RCategory.PUT : RCategory.POST} isNavigate>\n      <>\n        <PageTitle title={id ? \"Thay đổi danh mục\" : \"Tạo mới danh mục\"} />\n        <Snack open={openAlert} message={message} severity={color} onClose={onClose} />\n        <div className=\"card p-4\">\n          <form onSubmit={handleSubmit} className=\"form\">\n            <div className=\"column my-3\">\n              <SwitchButton label=\"Trạng thái\" value={values.status} onChange={(e) => setFieldValue('status', e.target.checked)} />\n            </div>\n            <div className=\"column my-3\">\n              <label className=\"form-label required\">Tên chi danh mục</label>\n              <input type=\"text\"\n                name=\"name\" value={values.name} onChange={handleChange}\n                className=\"form-control form-control-solid\"\n              />\n              {\n                touched.name && errors.name &&\n                <span className=\"text-danger fs-8\">{errors.name}</span>\n              }\n            </div>\n            <div className=\"column  my-3\">\n              <label className=\"form-label required\">Tag</label>\n              <div className=\"column\">\n                <SelectTag value={values.tag_id} onChange={(e) => setFieldValue('tag_id', e.target.value)} />\n              </div>\n              {\n                touched.tag_id && errors.tag_id &&\n                <span className=\"text-danger fs-8\">{errors.tag_id}</span>\n              }\n            </div>\n            <div className=\"d-flex justify-content-end mt-6\">\n              <LoadingButton loading={isLoading} type=\"submit\" color=\"success\" variant=\"contained\">\n                Lưu\n              </LoadingButton>\n              {\n                id &&\n                <LoadingButton onClick={() => refetch()} loading={isFetching} className=\"mx-2\" type=\"button\" variant=\"outlined\">\n                  Khôi phục\n                </LoadingButton>\n              }\n            </div>\n          </form>\n        </div>\n      </>\n    </RoleLayout>\n  );\n}\n\nexport default CategoryForm;"],"names":["id","useParams","useMessage","result","notification","message","color","openAlert","onClose","useMutation","mutationFn","body","_category","onSuccess","onError","err","response","data","mutate","isLoading","useFormik","initialValues","name","tag_id","status","validationSchema","Yup","required","onSubmit","values","errors","touched","setFieldValue","handleChange","handleSubmit","useQuery","queryKey","QR_KEY","queryFn","enabled","context","refetch","isFetching","permissionPath","RCategory","isNavigate","title","open","severity","className","label","value","onChange","e","target","checked","type","loading","variant","onClick"],"sourceRoot":""}