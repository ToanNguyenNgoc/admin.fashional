"use strict";(self.webpackChunkadmin_fashional_pro=self.webpackChunkadmin_fashional_pro||[]).push([[531],{2531:function(e,n,a){a.r(n);var t=a(885),s=a(6362),i=a(7794),l=a(4280),r=a(9891),c=a(6252),o=a(4653),u=a(3654),d=a(6541),m=a(2791),h=a(1933),f=a(6871),g=a(763),x=a(5173),v=a(6463),j=a(6863),p=a(5280),y=a(184);var b=function(e){var n,a=e.value,o=e.onChange,u=void 0===o?function(){}:o,f=(0,m.useState)(""),x=(0,t.Z)(f,2),v=x[0],j=x[1],p=(0,h.useQuery)({queryKey:[d.xG.tag,v],queryFn:function(){return c.Si.findAll({search:v,status:!0})}}).data,b=(0,m.useCallback)((0,g.debounce)((function(e){return j(e)}),800),[]);return(0,y.jsx)(s.Z,{sx:{m:1,minWidth:250},size:"small",children:(0,y.jsxs)(i.Z,{labelId:"demo-select-small-label",id:"demo-select-small",size:"small",value:a,defaultValue:"",onChange:u,children:[(0,y.jsx)(l.Z,{size:"small",style:{width:"100%"},id:"filled-basic",variant:"filled",placeholder:"T\xecm ki\u1ebfm...",onChange:function(e){return b(e.target.value)}}),null===p||void 0===p||null===(n=p.context.data)||void 0===n?void 0:n.map((function(e){return(0,y.jsxs)(r.Z,{value:e.id,children:["*",e.name]},e.id)}))]})})};n.default=function(){var e=(0,f.UO)().id,n=(0,p.UD)(),a=n.result,t=n.notification,s=t.message,i=t.color,l=t.openAlert,r=n.onClose,m=(0,h.useMutation)({mutationFn:function(n){return e?c.VR.update(e,n):c.VR.create(n)},onSuccess:function(){return a({message:e?"C\u1eadp nh\u1eadt th\xe0nh c\xf4ng":"T\u1ea1o m\u1edbi th\xe0nh c\xf4ng",color:"success"})},onError:function(e){var n;a({message:(null===(n=e.response)||void 0===n?void 0:n.data.message)||"C\xf3 l\u1ed7i x\u1ea3y ra",color:"error"})}}),g=m.mutate,C=m.isLoading,N=(0,x.TA)({initialValues:{name:"",tag_id:"",status:!0},validationSchema:j.Ry({name:j.Z_().required("Nh\u1eadp t\xean"),tag_id:j.Rx().required("Ch\u1ecdn tag")}),onSubmit:function(e){return g(e)}}),_=N.values,T=N.errors,S=N.touched,k=N.setFieldValue,q=N.handleChange,Z=N.handleSubmit,V=(0,h.useQuery)({queryKey:[d.xG.category,e],queryFn:function(){return c.VR.findById(e||0)},enabled:!!e,onSuccess:function(e){k("name",e.context.name),k("tag_id",e.context.tag_id),k("status",e.context.status)}}),F=V.refetch,R=V.isFetching;return(0,y.jsx)(o.uR,{permissionPath:e?u.MM.PUT:u.MM.POST,isNavigate:!0,children:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(o.V1,{title:e?"Thay \u0111\u1ed5i danh m\u1ee5c":"T\u1ea1o m\u1edbi danh m\u1ee5c"}),(0,y.jsx)(o.rH,{open:l,message:s,severity:i,onClose:r}),(0,y.jsx)("div",{className:"card p-4",children:(0,y.jsxs)("form",{onSubmit:Z,className:"form",children:[(0,y.jsx)("div",{className:"column my-3",children:(0,y.jsx)(o.U3,{label:"Tr\u1ea1ng th\xe1i",value:_.status,onChange:function(e){return k("status",e.target.checked)}})}),(0,y.jsxs)("div",{className:"column my-3",children:[(0,y.jsx)("label",{className:"form-label required",children:"T\xean chi danh m\u1ee5c"}),(0,y.jsx)("input",{type:"text",name:"name",value:_.name,onChange:q,className:"form-control form-control-solid"}),S.name&&T.name&&(0,y.jsx)("span",{className:"text-danger fs-8",children:T.name})]}),(0,y.jsxs)("div",{className:"column  my-3",children:[(0,y.jsx)("label",{className:"form-label required",children:"Tag"}),(0,y.jsx)("div",{className:"column",children:(0,y.jsx)(b,{value:_.tag_id,onChange:function(e){return k("tag_id",e.target.value)}})}),S.tag_id&&T.tag_id&&(0,y.jsx)("span",{className:"text-danger fs-8",children:T.tag_id})]}),(0,y.jsxs)("div",{className:"d-flex justify-content-end mt-6",children:[(0,y.jsx)(v.Z,{loading:C,type:"submit",color:"success",variant:"contained",children:"L\u01b0u"}),e&&(0,y.jsx)(v.Z,{onClick:function(){return F()},loading:R,className:"mx-2",type:"button",variant:"outlined",children:"Kh\xf4i ph\u1ee5c"})]})]})})]})})}}}]);
//# sourceMappingURL=531.e75a7241.chunk.js.map