{"version":3,"file":"static/js/907.c4ab92f4.chunk.js","mappings":"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","sources":["app/pages/categories/index.tsx"],"sourcesContent":["import { Button } from \"@mui/material\";\nimport { _category } from \"app/apis\";\nimport { FaSpinner, PageTitle, RoleLayout, SwitchButton } from \"app/components\";\nimport { PCategory, RCategory } from \"app/constants\";\nimport { usePermission } from \"app/hooks\";\nimport { Category, CategoryBody, QrCategory } from \"app/models\";\nimport { QR_KEY } from \"configs\";\nimport moment from \"moment\";\nimport queryString from \"query-string\";\nimport { FC } from \"react\";\nimport { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\n\nfunction CategoryPage() {\n  const navigate = useNavigate()\n  const location = useLocation()\n  const query = queryString.parse(location.search) as QrCategory\n  const { data } = useQuery({\n    queryKey: [QR_KEY.category, query],\n    queryFn: () => _category.findAll({\n      \"page\": query?.page || 1,\n      \"limit\": 15\n    })\n  })\n  return (\n    <RoleLayout permissionPath={RCategory.GET} isNavigate >\n      <>\n        <PageTitle title=\"Danh mục sản phẩm\">\n          <RoleLayout permissionPath={RCategory.POST}>\n            <Button\n              onClick={() => navigate(PCategory.create)}\n              size=\"medium\" color=\"primary\"\n              variant=\"contained\" >\n              Tạo mới danh mục\n            </Button>\n          </RoleLayout>\n        </PageTitle>\n        <div className={`card`}>\n          <div className='card-header border-0 pt-5'>\n            <h3 className='card-title align-items-start flex-column'>\n              <span className='text-muted mt-1 fw-semobold fs-7'>{data?.context?.total} danh mục</span>\n            </h3>\n          </div>\n          <div className='card-body py-3'>\n            <div className='table-responsive'>\n              <table className='table align-middle gs-0 gy-4'>\n                <thead>\n                  <tr className='fw-bold text-muted bg-light'>\n                    <th className='min-w-300px rounded-start'>Tên danh mục</th>\n                    <th className='min-w-125px'>Slugify</th>\n                    <th className='min-w-125px'>Tag</th>\n                    <th className='min-w-100px'>Trạng thái</th>\n                    <th className='min-w-100px'>Cập nhật</th>\n                    <th className='min-w-100px'>Ngày tạo</th>\n                    <th className='min-w-200px text-end rounded-end'></th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {\n                    data?.context.data?.map(item => (\n                      <CategoryItem key={item.id} item={item} query={query} />\n                    ))\n                  }\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </>\n    </RoleLayout>\n  );\n}\nconst CategoryItem: FC<{ item: Category, query?: QrCategory }> = ({ item, query }) => {\n  const { resolve } = usePermission(RCategory.PUT)\n  const navigate = useNavigate()\n  const client = useQueryClient()\n  const { mutate } = useMutation({\n    mutationFn: (body: CategoryBody) => _category.update(item.id, body),\n    onSuccess: () => client.invalidateQueries([QR_KEY.category, query])\n  })\n  const { mutate: mutateDelete, isLoading: isLoadingDelete } = useMutation({\n    mutationFn: () => _category.delete(item.id),\n    onSuccess: () => {\n      client.invalidateQueries([QR_KEY.category, query])\n    }\n  })\n  return (\n    <tr key={item.id}>\n      <td>\n        <span className=\"text-dark fw-bold mb-1 fs-6\">\n          {item.name}\n        </span>\n      </td>\n      <td>\n        <span className=\"text-dark fw-bold d-block mb-1 fs-6\">{item.name_slugify}</span>\n      </td>\n      <td>\n        <span className='text-muted fw-semobold text-muted d-block fs-6'>\n          {item.tag?.name}\n        </span>\n      </td>\n      <td>\n        <SwitchButton disable={!resolve} value={item.status} onChange={(e) => mutate({\n          status: e.target.checked,\n          tag_id: item.tag_id\n        })} />\n      </td>\n      <td>\n        <span className='text-muted fw-semobold text-muted d-block fs-7'>\n          {moment(item.updated_at).format('DD/MM/YYYY')}\n        </span>\n      </td>\n      <td>\n        <span className='text-muted fw-semobold text-muted d-block fs-7'>\n          {moment(item.created_at).format('DD/MM/YYYY')}\n        </span>\n      </td>\n      <td className='text-end'>\n        <RoleLayout permissionPath={RCategory.PUT}>\n          <button onClick={() => navigate(PCategory.update_id(item.id))} type=\"submit\" className=\"btn btn-icon btn-success me-1 rounded-circle btn-sm\">\n            <i className=\"bi bi-pen fs-6\"></i>\n          </button>\n        </RoleLayout>\n        <RoleLayout permissionPath={RCategory.DELETE}>\n          <button onClick={() => mutateDelete()} className=\"btn btn-icon btn-danger me-1 rounded-circle btn-sm\">\n            {isLoadingDelete ? <FaSpinner /> : <i className=\"bi bi-trash-fill fs-6\"></i>}\n          </button>\n        </RoleLayout>\n      </td>\n    </tr>\n  )\n}\n\nexport default CategoryPage;"],"names":["CategoryItem","item","query","resolve","usePermission","RCategory","navigate","useNavigate","client","useQueryClient","mutate","useMutation","mutationFn","body","_category","id","onSuccess","invalidateQueries","QR_KEY","mutateDelete","isLoadingDelete","isLoading","className","name","name_slugify","tag","disable","value","status","onChange","e","target","checked","tag_id","moment","updated_at","format","created_at","permissionPath","onClick","PCategory","type","location","useLocation","queryString","search","data","useQuery","queryKey","queryFn","page","isNavigate","title","size","color","variant","context","total","map"],"sourceRoot":""}